<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>íˆ¬ì íˆìŠ¤í† ë¦¬ ëŒ€ì‹œë³´ë“œ - ë§ˆì´ë°ì´í„°</title>
    
    <!-- PWA ë©”íƒ€ íƒœê·¸ -->
    <meta name="description" content="í¬íŠ¸í´ë¦¬ì˜¤ íˆìŠ¤í† ë¦¬ ë° íˆ¬ì ì„±ê³¼ ë¶„ì„ ëŒ€ì‹œë³´ë“œ">
    <meta name="theme-color" content="#03C75A">
    <link rel="manifest" href="manifest.json">
    
    <!-- ìŠ¤íƒ€ì¼ì‹œíŠ¸ -->
    <link rel="stylesheet" href="style.css">
    
    <!-- ì°¨íŠ¸ ë¼ì´ë¸ŒëŸ¬ë¦¬ -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/date-fns@2.29.3/index.min.js"></script>
    
    <style>
        .dashboard-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: var(--white);
            border-radius: 12px;
            padding: 24px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            text-align: center;
            transition: transform 0.2s ease;
        }
        
        .stat-card:hover {
            transform: translateY(-2px);
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--gray-900);
            margin-bottom: 8px;
        }
        
        .stat-value.positive {
            color: var(--npay-green);
        }
        
        .stat-value.negative {
            color: var(--error);
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: var(--gray-600);
            font-weight: 500;
        }
        
        .chart-section {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .chart-title {
            font-size: 1.4rem;
            font-weight: 600;
            color: var(--gray-900);
        }
        
        .chart-controls {
            display: flex;
            gap: 8px;
        }
        
        .chart-controls button {
            padding: 6px 12px;
            border: 1px solid var(--gray-200);
            background: var(--white);
            border-radius: 6px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .chart-controls button.active {
            background: var(--npay-green);
            color: var(--white);
            border-color: var(--npay-green);
        }
        
        .portfolio-list {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        
        .portfolio-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px;
            border-bottom: 1px solid var(--gray-200);
            transition: background 0.2s ease;
        }
        
        .portfolio-item:hover {
            background: var(--gray-100);
        }
        
        .portfolio-item:last-child {
            border-bottom: none;
        }
        
        .portfolio-info {
            flex: 1;
        }
        
        .portfolio-date {
            font-weight: 600;
            color: var(--gray-900);
            margin-bottom: 4px;
        }
        
        .portfolio-summary {
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .portfolio-performance {
            text-align: right;
        }
        
        .portfolio-return {
            font-weight: 700;
            font-size: 1.1rem;
            margin-bottom: 4px;
        }
        
        .portfolio-amount {
            font-size: 0.9rem;
            color: var(--gray-600);
        }
        
        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: var(--gray-600);
        }
        
        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 16px;
        }
        
        .data-controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        
        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--gray-200);
            border-top: 2px solid var(--npay-green);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-right: 8px;
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                padding: 10px;
            }
            
            .stats-grid {
                grid-template-columns: 1fr;
                gap: 16px;
            }
            
            .chart-header {
                flex-direction: column;
                gap: 16px;
                align-items: flex-start;
            }
            
            .data-controls {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <header class="header">
            <h1>ğŸ“Š íˆ¬ì íˆìŠ¤í† ë¦¬ ëŒ€ì‹œë³´ë“œ</h1>
            <div class="naverpay-logo">
                <div class="logo-placeholder">Npay ë°ì´í„°</div>
            </div>
        </header>

        <!-- ë°ì´í„° ì œì–´ ë²„íŠ¼ -->
        <div class="data-controls">
            <button class="btn secondary" onclick="loadDashboardData()">
                <span id="refresh-icon">ğŸ”„</span> ë°ì´í„° ìƒˆë¡œê³ ì¹¨
            </button>
            <button class="btn secondary" onclick="exportData()">ğŸ“¤ ë°ì´í„° ë‚´ë³´ë‚´ê¸°</button>
            <button class="btn secondary" onclick="importData()">ğŸ“¥ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°</button>
            <button class="btn secondary" onclick="clearAllData()">ğŸ—‘ï¸ ëª¨ë“  ë°ì´í„° ì‚­ì œ</button>
            <button class="btn primary" onclick="goToMainApp()">ğŸš€ ë©”ì¸ ì•±ìœ¼ë¡œ</button>
        </div>

        <!-- í†µê³„ ì¹´ë“œ -->
        <div class="stats-grid" id="stats-grid">
            <div class="stat-card">
                <div class="stat-value" id="total-portfolios">-</div>
                <div class="stat-label">ì´ í¬íŠ¸í´ë¦¬ì˜¤ ìˆ˜</div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="avg-return">-</div>
                <div class="stat-label">í‰ê·  ìˆ˜ìµë¥ </div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="best-performance">-</div>
                <div class="stat-label">ìµœê³  ìˆ˜ìµë¥ </div>
            </div>
            <div class="stat-card">
                <div class="stat-value" id="total-investment">-</div>
                <div class="stat-label">ì´ íˆ¬ìê¸ˆì•¡</div>
            </div>
        </div>

        <!-- ì„±ê³¼ ì°¨íŠ¸ -->
        <div class="chart-section">
            <div class="chart-header">
                <h2 class="chart-title">í¬íŠ¸í´ë¦¬ì˜¤ ì„±ê³¼ ì¶”ì´</h2>
                <div class="chart-controls">
                    <button class="active" onclick="changeChartPeriod('7d')">7ì¼</button>
                    <button onclick="changeChartPeriod('30d')">30ì¼</button>
                    <button onclick="changeChartPeriod('90d')">90ì¼</button>
                    <button onclick="changeChartPeriod('1y')">1ë…„</button>
                </div>
            </div>
            <canvas id="performanceChart" width="400" height="200"></canvas>
        </div>

        <!-- í¬íŠ¸í´ë¦¬ì˜¤ íˆìŠ¤í† ë¦¬ -->
        <div class="portfolio-list">
            <h2 class="section-title">í¬íŠ¸í´ë¦¬ì˜¤ íˆìŠ¤í† ë¦¬</h2>
            <div id="portfolio-history">
                <div class="empty-state">
                    <div class="empty-state-icon">ğŸ“ˆ</div>
                    <p>ì €ì¥ëœ í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                    <p>ë©”ì¸ ì•±ì—ì„œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë¶„ì„í•˜ê³  ì €ì¥í•´ë³´ì„¸ìš”!</p>
                </div>
            </div>
        </div>

        <!-- íŒŒì¼ ì…ë ¥ (ìˆ¨ê¹€) -->
        <input type="file" id="import-file" accept=".json" style="display: none;" onchange="handleFileImport(event)">
    </div>

    <!-- ë°ì´í„°ë² ì´ìŠ¤ ë° ë©”ì¸ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="database.js"></script>
    <script>
        let db;
        let performanceChart;
        let currentPeriod = '7d';

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', async () => {
            try {
                await initializeApp();
            } catch (error) {
                console.error('ì•± ì´ˆê¸°í™” ì‹¤íŒ¨:', error);
                showError('ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        });

        // ì•± ì´ˆê¸°í™”
        async function initializeApp() {
            showLoading('refresh-icon');
            
            // ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
            db = await initializeDatabase();
            
            // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
            await loadDashboardData();
            
            // ì„±ê³¼ ì°¨íŠ¸ ì´ˆê¸°í™”
            initializeChart();
            
            hideLoading('refresh-icon');
        }

        // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ
        async function loadDashboardData() {
            try {
                showLoading('refresh-icon');
                
                // í†µê³„ ì •ë³´ ë¡œë“œ
                const stats = await db.getStatistics();
                updateStatsDisplay(stats);
                
                // í¬íŠ¸í´ë¦¬ì˜¤ íˆìŠ¤í† ë¦¬ ë¡œë“œ
                const portfolios = await db.getPortfolios('default', 50);
                updatePortfolioHistory(portfolios);
                
                // ì„±ê³¼ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
                await updatePerformanceChart();
                
                hideLoading('refresh-icon');
                
                if (portfolios.length === 0) {
                    showInfo('ì•„ì§ ì €ì¥ëœ í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì—†ìŠµë‹ˆë‹¤. ë©”ì¸ ì•±ì—ì„œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë¶„ì„í•´ë³´ì„¸ìš”!');
                }
                
            } catch (error) {
                console.error('ëŒ€ì‹œë³´ë“œ ë°ì´í„° ë¡œë“œ ì‹¤íŒ¨:', error);
                showError('ë°ì´í„° ë¡œë“œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                hideLoading('refresh-icon');
            }
        }

        // í†µê³„ í‘œì‹œ ì—…ë°ì´íŠ¸
        function updateStatsDisplay(stats) {
            document.getElementById('total-portfolios').textContent = stats.totalPortfolios;
            
            const avgReturn = document.getElementById('avg-return');
            avgReturn.textContent = stats.avgReturnRate.toFixed(2) + '%';
            avgReturn.className = 'stat-value ' + (stats.avgReturnRate >= 0 ? 'positive' : 'negative');
            
            const bestPerf = document.getElementById('best-performance');
            bestPerf.textContent = stats.bestPerformance.toFixed(2) + '%';
            bestPerf.className = 'stat-value ' + (stats.bestPerformance >= 0 ? 'positive' : 'negative');
            
            document.getElementById('total-investment').textContent = 
                (stats.totalInvestment / 10000).toFixed(0) + 'ë§Œì›';
        }

        // í¬íŠ¸í´ë¦¬ì˜¤ íˆìŠ¤í† ë¦¬ ì—…ë°ì´íŠ¸
        function updatePortfolioHistory(portfolios) {
            const container = document.getElementById('portfolio-history');
            
            if (portfolios.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-state-icon">ğŸ“ˆ</div>
                        <p>ì €ì¥ëœ í¬íŠ¸í´ë¦¬ì˜¤ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
                        <p>ë©”ì¸ ì•±ì—ì„œ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ë¶„ì„í•˜ê³  ì €ì¥í•´ë³´ì„¸ìš”!</p>
                    </div>
                `;
                return;
            }

            const itemsHtml = portfolios.map(portfolio => {
                const date = new Date(portfolio.timestamp).toLocaleDateString('ko-KR');
                const time = new Date(portfolio.timestamp).toLocaleTimeString('ko-KR', { 
                    hour: '2-digit', 
                    minute: '2-digit' 
                });
                
                const stockCount = Object.keys(portfolio.stocks || {}).length;
                const performance = portfolio.performance;
                const returnClass = performance.returnRate >= 0 ? 'positive' : 'negative';
                
                return `
                    <div class="portfolio-item" onclick="viewPortfolioDetail(${portfolio.id})">
                        <div class="portfolio-info">
                            <div class="portfolio-date">${date} ${time}</div>
                            <div class="portfolio-summary">
                                ${stockCount}ê°œ ì¢…ëª© â€¢ ${(performance.totalInvestment / 10000).toFixed(0)}ë§Œì› íˆ¬ì
                            </div>
                        </div>
                        <div class="portfolio-performance">
                            <div class="portfolio-return ${returnClass}">
                                ${performance.returnRate >= 0 ? '+' : ''}${performance.returnRate.toFixed(2)}%
                            </div>
                            <div class="portfolio-amount">
                                ${(performance.totalValue / 10000).toFixed(0)}ë§Œì›
                            </div>
                        </div>
                    </div>
                `;
            }).join('');

            container.innerHTML = itemsHtml;
        }

        // ì„±ê³¼ ì°¨íŠ¸ ì´ˆê¸°í™”
        function initializeChart() {
            const ctx = document.getElementById('performanceChart').getContext('2d');
            
            performanceChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: [],
                    datasets: [{
                        label: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜',
                        data: [],
                        borderColor: '#03C75A',
                        backgroundColor: 'rgba(3, 199, 90, 0.1)',
                        borderWidth: 2,
                        fill: true,
                        tension: 0.3
                    }, {
                        label: 'ìˆ˜ìµë¥ ',
                        data: [],
                        borderColor: '#3B82F6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        borderWidth: 2,
                        fill: false,
                        yAxisID: 'y1'
                    }]
                },
                options: {
                    responsive: true,
                    interaction: {
                        mode: 'index',
                        intersect: false,
                    },
                    scales: {
                        x: {
                            display: true,
                            title: {
                                display: true,
                                text: 'ë‚ ì§œ'
                            }
                        },
                        y: {
                            type: 'linear',
                            display: true,
                            position: 'left',
                            title: {
                                display: true,
                                text: 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜ (ì›)'
                            },
                            ticks: {
                                callback: function(value) {
                                    return (value / 10000).toFixed(0) + 'ë§Œì›';
                                }
                            }
                        },
                        y1: {
                            type: 'linear',
                            display: true,
                            position: 'right',
                            title: {
                                display: true,
                                text: 'ìˆ˜ìµë¥  (%)'
                            },
                            grid: {
                                drawOnChartArea: false,
                            },
                            ticks: {
                                callback: function(value) {
                                    return value.toFixed(1) + '%';
                                }
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    if (context.datasetIndex === 0) {
                                        return 'í¬íŠ¸í´ë¦¬ì˜¤ ê°€ì¹˜: ' + (context.raw / 10000).toFixed(0) + 'ë§Œì›';
                                    } else {
                                        return 'ìˆ˜ìµë¥ : ' + context.raw.toFixed(2) + '%';
                                    }
                                }
                            }
                        }
                    }
                }
            });
        }

        // ì„±ê³¼ ì°¨íŠ¸ ì—…ë°ì´íŠ¸
        async function updatePerformanceChart() {
            try {
                const portfolios = await db.getPortfolios('default', 100);
                
                if (portfolios.length === 0) {
                    performanceChart.data.labels = [];
                    performanceChart.data.datasets[0].data = [];
                    performanceChart.data.datasets[1].data = [];
                    performanceChart.update();
                    return;
                }

                // ê¸°ê°„ë³„ í•„í„°ë§
                const days = periodToDays(currentPeriod);
                const cutoffDate = new Date();
                cutoffDate.setDate(cutoffDate.getDate() - days);
                
                const filteredPortfolios = portfolios.filter(p => 
                    new Date(p.timestamp) >= cutoffDate
                ).sort((a, b) => new Date(a.timestamp) - new Date(b.timestamp));

                const labels = filteredPortfolios.map(p => 
                    new Date(p.timestamp).toLocaleDateString('ko-KR', { 
                        month: 'short', 
                        day: 'numeric' 
                    })
                );
                
                const values = filteredPortfolios.map(p => p.performance.totalValue);
                const returns = filteredPortfolios.map(p => p.performance.returnRate);

                performanceChart.data.labels = labels;
                performanceChart.data.datasets[0].data = values;
                performanceChart.data.datasets[1].data = returns;
                performanceChart.update();
                
            } catch (error) {
                console.error('ì°¨íŠ¸ ì—…ë°ì´íŠ¸ ì‹¤íŒ¨:', error);
            }
        }

        // ì°¨íŠ¸ ê¸°ê°„ ë³€ê²½
        async function changeChartPeriod(period) {
            currentPeriod = period;
            
            // ë²„íŠ¼ ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('.chart-controls button').forEach(btn => {
                btn.classList.remove('active');
            });
            event.target.classList.add('active');
            
            // ì°¨íŠ¸ ì—…ë°ì´íŠ¸
            await updatePerformanceChart();
        }

        // ê¸°ê°„ì„ ì¼ìˆ˜ë¡œ ë³€í™˜
        function periodToDays(period) {
            switch (period) {
                case '7d': return 7;
                case '30d': return 30;
                case '90d': return 90;
                case '1y': return 365;
                default: return 30;
            }
        }

        // í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„¸ ë³´ê¸°
        function viewPortfolioDetail(portfolioId) {
            // ìƒì„¸ ëª¨ë‹¬ ë˜ëŠ” ìƒˆ í˜ì´ì§€ë¡œ ì´ë™ (êµ¬í˜„ ì˜ˆì •)
            alert(`í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„¸ ë³´ê¸° (ID: ${portfolioId})\n\nì´ ê¸°ëŠ¥ì€ ë‹¤ìŒ ë²„ì „ì—ì„œ êµ¬í˜„ë©ë‹ˆë‹¤.`);
        }

        // ë°ì´í„° ë‚´ë³´ë‚´ê¸°
        async function exportData() {
            try {
                showLoading('export');
                const exportData = await db.exportData();
                
                const blob = new Blob([JSON.stringify(exportData, null, 2)], {
                    type: 'application/json'
                });
                
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `mydata-investment-backup-${new Date().toISOString().split('T')[0]}.json`;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                URL.revokeObjectURL(url);
                
                showSuccess('ë°ì´í„° ë‚´ë³´ë‚´ê¸°ê°€ ì™„ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.');
                hideLoading('export');
                
            } catch (error) {
                console.error('ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì‹¤íŒ¨:', error);
                showError('ë°ì´í„° ë‚´ë³´ë‚´ê¸° ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                hideLoading('export');
            }
        }

        // ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
        function importData() {
            document.getElementById('import-file').click();
        }

        // íŒŒì¼ ê°€ì ¸ì˜¤ê¸° ì²˜ë¦¬
        async function handleFileImport(event) {
            const file = event.target.files[0];
            if (!file) return;

            try {
                const text = await file.text();
                const importData = JSON.parse(text);
                
                const count = await db.importData(importData);
                showSuccess(`${count}ê°œì˜ í¬íŠ¸í´ë¦¬ì˜¤ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤.`);
                
                // ëŒ€ì‹œë³´ë“œ ìƒˆë¡œê³ ì¹¨
                await loadDashboardData();
                
            } catch (error) {
                console.error('ë°ì´í„° ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:', error);
                showError('ìœ íš¨í•˜ì§€ ì•Šì€ íŒŒì¼ í˜•ì‹ì…ë‹ˆë‹¤.');
            }
            
            // íŒŒì¼ ì…ë ¥ ë¦¬ì…‹
            event.target.value = '';
        }

        // ëª¨ë“  ë°ì´í„° ì‚­ì œ
        async function clearAllData() {
            if (!confirm('ì •ë§ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?\n\nì´ ì‘ì—…ì€ ë˜ëŒë¦´ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.')) {
                return;
            }

            try {
                await db.clearStore('portfolios');
                await db.clearStore('performanceHistory');
                await db.clearStore('investmentAdvice');
                await db.clearStore('marketData');
                
                showSuccess('ëª¨ë“  ë°ì´í„°ê°€ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                await loadDashboardData();
                
            } catch (error) {
                console.error('ë°ì´í„° ì‚­ì œ ì‹¤íŒ¨:', error);
                showError('ë°ì´í„° ì‚­ì œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
            }
        }

        // ë©”ì¸ ì•±ìœ¼ë¡œ ì´ë™
        function goToMainApp() {
            window.location.href = 'market-data-integration.html';
        }

        // ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ë“¤
        function showLoading(elementId) {
            const element = document.getElementById(elementId);
            if (element) {
                element.innerHTML = '<span class="loading-spinner"></span>';
            }
        }

        function hideLoading(elementId) {
            const element = document.getElementById(elementId);
            if (element && elementId === 'refresh-icon') {
                element.innerHTML = 'ğŸ”„';
            }
        }

        function showSuccess(message) {
            showNotification(message, 'success');
        }

        function showError(message) {
            showNotification(message, 'error');
        }

        function showInfo(message) {
            showNotification(message, 'info');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `notification notification-${type}`;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === 'success' ? 'var(--npay-green)' : 
                             type === 'error' ? 'var(--error)' : 'var(--info)'};
                color: white;
                padding: 12px 20px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                z-index: 10000;
                max-width: 300px;
                animation: slideIn 0.3s ease;
            `;
            notification.textContent = message;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }
    </script>
</body>
</html>
