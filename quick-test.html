<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¹ ë¥¸ í…ŒìŠ¤íŠ¸</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <style>
        body { font-family: Arial, sans-serif; max-width: 600px; margin: 50px auto; padding: 20px; }
        .btn { background: #03C75A; color: white; border: none; padding: 15px 30px; margin: 10px; border-radius: 5px; cursor: pointer; }
        .btn:hover { background: #02a049; }
        .result { background: #f8f9fa; padding: 15px; margin: 15px 0; border-radius: 5px; border: 1px solid #dee2e6; }
        input { width: 100%; padding: 10px; margin: 10px 0; border: 1px solid #ddd; border-radius: 4px; }
    </style>
</head>
<body>
    <h1>ğŸ”§ ë¹ ë¥¸ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    
    <div>
        <h3>1ï¸âƒ£ ê¸°ë³¸ JavaScript í…ŒìŠ¤íŠ¸</h3>
        <button class="btn" onclick="alert('JavaScript ê¸°ë³¸ ë™ì‘ í™•ì¸!')">ê¸°ë³¸ í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="testConsole()">ì½˜ì†” í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div>
        <h3>2ï¸âƒ£ í¬íŠ¸í´ë¦¬ì˜¤ ê°„ë‹¨ í…ŒìŠ¤íŠ¸</h3>
        <input type="text" id="test-portfolio" placeholder="ì‚¼ì„±ì „ì 10ì£¼, ì¹´ì¹´ì˜¤ 5" value="ì‚¼ì„±ì „ì 10ì£¼, ì¹´ì¹´ì˜¤ 5">
        <input type="number" id="test-amount" placeholder="10000000" value="10000000">
        <button class="btn" onclick="testPortfolioQuick()">í¬íŠ¸í´ë¦¬ì˜¤ íŒŒì‹± í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div>
        <h3>3ï¸âƒ£ API ì—°ê²° í…ŒìŠ¤íŠ¸</h3>
        <button class="btn" onclick="testServerAPI()">ì„œë²„ API í…ŒìŠ¤íŠ¸</button>
        <button class="btn" onclick="testYahooAPI()">Yahoo API í…ŒìŠ¤íŠ¸</button>
    </div>
    
    <div id="result" class="result" style="display: none;">
        <h4>ê²°ê³¼:</h4>
        <div id="result-content"></div>
    </div>

    <script>
        function testConsole() {
            console.log('âœ… ì½˜ì†” í…ŒìŠ¤íŠ¸ ì„±ê³µ');
            showResult('ì½˜ì†” í…ŒìŠ¤íŠ¸ ì™„ë£Œ - F12ë¡œ ì½˜ì†” í™•ì¸');
        }
        
        function testPortfolioQuick() {
            try {
                const portfolioText = document.getElementById('test-portfolio').value;
                const amount = document.getElementById('test-amount').value;
                
                console.log('ğŸ“Š ì…ë ¥ê°’:', { portfolioText, amount });
                
                // ê°„ë‹¨í•œ íŒŒì‹± í…ŒìŠ¤íŠ¸
                const lines = portfolioText.split(',');
                let result = `ì…ë ¥ê°’: ${portfolioText}\níˆ¬ìê¸ˆì•¡: ${amount}ì›\níŒŒì‹±ëœ í•­ëª©: ${lines.length}ê°œ\n`;
                
                lines.forEach((line, index) => {
                    const trimmed = line.trim();
                    result += `${index + 1}. ${trimmed}\n`;
                });
                
                showResult(result);
                console.log('âœ… í¬íŠ¸í´ë¦¬ì˜¤ íŒŒì‹± í…ŒìŠ¤íŠ¸ ì„±ê³µ');
                
            } catch (error) {
                showResult('âŒ ì˜¤ë¥˜: ' + error.message);
                console.error('âŒ í¬íŠ¸í´ë¦¬ì˜¤ í…ŒìŠ¤íŠ¸ ì˜¤ë¥˜:', error);
            }
        }
        
        async function testServerAPI() {
            try {
                showResult('ğŸ”„ ì„œë²„ API í…ŒìŠ¤íŠ¸ ì¤‘...');
                
                const response = await fetch('/api/health');
                const data = await response.json();
                
                if (data.status === 'OK') {
                    showResult(`âœ… ì„œë²„ ì—°ê²° ì„±ê³µ!\nìƒíƒœ: ${data.status}\ní™˜ê²½: ${data.environment}\ní¬íŠ¸: ${data.port}\nGemini API: ${data.apis.gemini ? 'ì„¤ì •ë¨' : 'ë¯¸ì„¤ì •'}`);
                } else {
                    showResult('âš ï¸ ì„œë²„ ì‘ë‹µì´ ì˜ˆìƒê³¼ ë‹¤ë¦„: ' + JSON.stringify(data));
                }
            } catch (error) {
                showResult('âŒ ì„œë²„ ì—°ê²° ì‹¤íŒ¨: ' + error.message);
                console.error('âŒ ì„œë²„ API ì˜¤ë¥˜:', error);
            }
        }
        
        async function testYahooAPI() {
            try {
                showResult('ğŸ”„ Yahoo Finance API í…ŒìŠ¤íŠ¸ ì¤‘...');
                
                const response = await fetch('/api/yahoo-finance/ì‚¼ì„±ì „ì');
                const data = await response.json();
                
                if (data.price || data.success !== false) {
                    showResult(`âœ… Yahoo API ì„±ê³µ!\nì¢…ëª©: ì‚¼ì„±ì „ì\nê°€ê²©: ${data.price}ì›\në³€ë™: ${data.change}ì› (${data.changePercent}%)`);
                } else {
                    showResult('âš ï¸ Yahoo API ì‘ë‹µ: ' + JSON.stringify(data));
                }
            } catch (error) {
                showResult('âŒ Yahoo API ì‹¤íŒ¨: ' + error.message);
                console.error('âŒ Yahoo API ì˜¤ë¥˜:', error);
            }
        }
        
        function showResult(message) {
            const resultDiv = document.getElementById('result');
            const contentDiv = document.getElementById('result-content');
            
            contentDiv.innerHTML = message.replace(/\n/g, '<br>');
            resultDiv.style.display = 'block';
            
            console.log('ğŸ“‹ ê²°ê³¼:', message);
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ ì‹œ
        document.addEventListener('DOMContentLoaded', () => {
            console.log('âœ… ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ í˜ì´ì§€ ë¡œë”© ì™„ë£Œ');
            showResult('í˜ì´ì§€ ë¡œë”© ì™„ë£Œ - ìœ„ ë²„íŠ¼ë“¤ì„ í´ë¦­í•´ì„œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”!');
        });
        
        // ì „ì—­ ì˜¤ë¥˜ í•¸ë“¤ëŸ¬
        window.addEventListener('error', function(e) {
            console.error('âŒ ì „ì—­ ì˜¤ë¥˜:', e.message, e.filename, e.lineno);
            showResult(`âŒ JavaScript ì˜¤ë¥˜: ${e.message} (íŒŒì¼: ${e.filename}, ë¼ì¸: ${e.lineno})`);
        });
    </script>
</body>
</html>
